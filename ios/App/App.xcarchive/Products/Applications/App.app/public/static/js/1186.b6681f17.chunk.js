"use strict";(self.webpackChunkwalktober=self.webpackChunkwalktober||[]).push([[1186],{1186:function(e,t,n){n.r(t),n.d(t,{startInputShims:function(){return E}});var r=n(4165),o=n(5861),i=n(9344),a=n(1811),u=new WeakMap,c=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];u.has(e)!==n&&(n?d(e,t,r,o):l(e,t))},s=function(e){return e===e.getRootNode().activeElement},d=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.parentNode,i=t.cloneNode(!1);i.classList.add("cloned-input"),i.tabIndex=-1,r&&(i.disabled=!0),o.appendChild(i),u.set(e,i);var a=e.ownerDocument,c="rtl"===a.dir?9999:-9999;e.style.pointerEvents="none",t.style.transform="translate3d(".concat(c,"px,").concat(n,"px,0) scale(0)")},l=function(e,t){var n=u.get(e);n&&(u.delete(e),n.remove()),e.style.pointerEvents="",t.style.transform=""},f=function(e,t,n){if(!n||!t)return function(){};var r=function(n){s(t)&&c(e,t,n)},o=function(){return c(e,t,!1)},i=function(){return r(!0)},u=function(){return r(!1)};return(0,a.a)(n,"ionScrollStart",i),(0,a.a)(n,"ionScrollEnd",u),t.addEventListener("blur",o),function(){(0,a.b)(n,"ionScrollStart",i),(0,a.b)(n,"ionScrollEnd",u),t.addEventListener("ionBlur",o)}},v="input, textarea, [no-blur], [contenteditable]",p=function(e,t,n){var r,o=null!==(r=e.closest("ion-item,[ion-item]"))&&void 0!==r?r:e;return m(o.getBoundingClientRect(),t.getBoundingClientRect(),n,e.ownerDocument.defaultView.innerHeight)},m=function(e,t,n,r){var o=e.top,i=e.bottom,a=t.top,u=a+15,c=.75*Math.min(t.bottom,r-n)-i,s=u-o,d=Math.round(c<0?-c:s>0?-s:0),l=Math.min(d,o-a),f=Math.abs(l)/.3;return{scrollAmount:l,scrollDuration:Math.min(400,Math.max(150,f)),scrollPadding:n,inputSafeY:4-(o-u)}},h=function(e,t,n,r,o){var i,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=function(e){i=(0,a.p)(e)},d=function(c){if(i){var d=(0,a.p)(c);b(6,i,d)||s(t)||w(e,t,n,r,o,u)}};return e.addEventListener("touchstart",c,{capture:!0,passive:!0}),e.addEventListener("touchend",d,!0),function(){e.removeEventListener("touchstart",c,!0),e.removeEventListener("touchend",d,!0)}},w=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t,n,u,s,d){var l,f,v,m,h,w,b,g=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=g.length>5&&void 0!==g[5]&&g[5],u||s){e.next=3;break}return e.abrupt("return");case 3:if(f=p(t,u||s,d),!(u&&Math.abs(f.scrollAmount)<4)){e.next=7;break}return n.focus(),e.abrupt("return");case 7:if(c(t,n,!0,f.inputSafeY,l),n.focus(),(0,a.r)((function(){return t.click()})),"undefined"===typeof window){e.next=23;break}if(m=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==v&&clearTimeout(v),window.removeEventListener("ionKeyboardDidShow",h),window.removeEventListener("ionKeyboardDidShow",m),!u){e.next=6;break}return e.next=6,(0,i.c)(u,0,f.scrollAmount,f.scrollDuration);case 6:c(t,n,!1,f.inputSafeY),n.focus();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function e(){window.removeEventListener("ionKeyboardDidShow",e),window.addEventListener("ionKeyboardDidShow",m)},!u){e.next=22;break}return e.next=16,(0,i.g)(u);case 16:if(w=e.sent,b=w.scrollHeight-w.clientHeight,!(f.scrollAmount>b-w.scrollTop)){e.next=22;break}return"password"===n.type?(f.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",h)):window.addEventListener("ionKeyboardDidShow",m),v=setTimeout(m,1e3),e.abrupt("return");case 22:m();case 23:case"end":return e.stop()}}),e)})));return function(t,n,r,o,i){return e.apply(this,arguments)}}(),b=function(e,t,n){if(t&&n){var r=t.x-n.x,o=t.y-n.y;return r*r+o*o>e*e}return!1},g="$ionPaddingTimer",y=function(e,t){var n,r;if("INPUT"===e.tagName&&(!e.parentElement||"ION-INPUT"!==e.parentElement.tagName)&&"ION-SEARCHBAR"!==(null===(r=null===(n=e.parentElement)||void 0===n?void 0:n.parentElement)||void 0===r?void 0:r.tagName)){var o=(0,i.a)(e);if(null!==o){var a=o[g];a&&clearTimeout(a),t>0?o.style.setProperty("--keyboard-offset","".concat(t,"px")):o[g]=setTimeout((function(){o.style.setProperty("--keyboard-offset","0px")}),120)}}},E=function(e,t){var n=document,u="ios"===t,c="android"===t,s=e.getNumber("keyboardHeight",290),d=e.getBoolean("scrollAssist",!0),l=e.getBoolean("hideCaretOnScroll",u),p=e.getBoolean("inputBlurring",u),m=e.getBoolean("scrollPadding",!0),w=Array.from(n.querySelectorAll("ion-input, ion-textarea")),b=new WeakMap,g=new WeakMap,E=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){var n,o,u,v,p,m;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return(0,a.c)(t,e)}));case 2:if(n=t.shadowRoot||t,o=n.querySelector("input")||n.querySelector("textarea"),u=(0,i.a)(t),v=u?null:t.closest("ion-footer"),o){e.next=8;break}return e.abrupt("return");case 8:u&&l&&!b.has(t)&&(p=f(t,o,u),b.set(t,p)),"date"===o.type||"datetime-local"===o.type||!u&&!v||!d||g.has(t)||(m=h(t,o,u,v,s,c),g.set(t,m));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();p&&function(){var e=!0,t=!1,n=document,r=function(){t=!0},o=function(){e=!0},i=function(r){if(t)t=!1;else{var o=n.activeElement;if(o&&!o.matches(v)){var i=r.target;i!==o&&(i.matches(v)||i.closest(v)||(e=!1,setTimeout((function(){e||o.blur()}),50)))}}};(0,a.a)(n,"ionScrollStart",r),n.addEventListener("focusin",o,!0),n.addEventListener("touchend",i,!1)}(),m&&function(e){var t=document,n=function(t){y(t.target,e)},r=function(e){y(e.target,0)};t.addEventListener("focusin",n),t.addEventListener("focusout",r)}(s);for(var x=0,k=w;x<k.length;x++){var S=k[x];E(S)}n.addEventListener("ionInputDidLoad",(function(e){E(e.detail)})),n.addEventListener("ionInputDidUnload",(function(e){!function(e){if(l){var t=b.get(e);t&&t(),b.delete(e)}if(d){var n=g.get(e);n&&n(),g.delete(e)}}(e.detail)}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUcsS0FmSCxDQVJBLENBd0JGLEdBQ0FsSCxFQUFBQSxFQUFBQSxHQUFpQmxCLEVBQUssaUJBQWtCNkgsR0FDeEM3SCxFQUFJa0IsaUJBQWlCLFVBQVc0RyxHQUFXLEdBQzNDOUgsRUFBSWtCLGlCQUFpQixXQUFZNkcsR0FBWSxFQU0vQyxDQStRSU0sR0FFRWxGLEdBL0dzQixTQUFDNUIsR0FDM0IsSUFBTXZCLEVBQU1zRyxTQUVOd0IsRUFBWSxTQUFDcEUsR0FDakJpQyxFQUFpQmpDLEVBQUd5RSxPQUFRNUcsRUFDOUIsRUFDTStHLEVBQWEsU0FBQzVFLEdBQ2xCaUMsRUFBaUJqQyxFQUFHeUUsT0FBUSxFQUM5QixFQUNBbkksRUFBSWtCLGlCQUFpQixVQUFXNEcsR0FDaEM5SCxFQUFJa0IsaUJBQWlCLFdBQVlvSCxFQUtuQyxDQWlHSUMsQ0FBb0JoSCxHQUt0QixJQUFLLElBQUwsTUFBb0JzRixFQUFNLGVBQUUsQ0FBdkIsSUFBTTFILEVBQUssS0FDZGdJLEVBQWNoSSxFQUNoQixDQUVBYSxFQUFJa0IsaUJBQWlCLG1CQUFvQixTQUFDd0MsR0FDeEN5RCxFQUFjekQsRUFBRzhFLE9BQ25CLElBQ0F4SSxFQUFJa0IsaUJBQWlCLHFCQUFzQixTQUFDd0MsSUFoQ3BCLFNBQUNoRixHQUN2QixHQUFJc0MsRUFBVyxDQUNiLElBQU15SCxFQUFLeEIsRUFBYXpHLElBQUk5QixHQUN4QitKLEdBQ0ZBLElBRUZ4QixFQUFheEcsT0FBTy9CLEVBQ3RCLENBQ0EsR0FBSWdJLEVBQWMsQ0FDaEIsSUFBTStCLEVBQUt2QixFQUFnQjFHLElBQUk5QixHQUMzQitKLEdBQ0ZBLElBRUZ2QixFQUFnQnpHLE9BQU8vQixFQUN6QixDQUNGLENBa0JFZ0ssQ0FBZ0JoRixFQUFHOEUsT0FDckIsR0FDRixDIiwic291cmNlcyI6WyIuLi9ub2RlX21vZHVsZXMvQGlvbmljL2NvcmUvY29tcG9uZW50cy9pbnB1dC1zaGltcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIChDKSBJb25pYyBodHRwOi8vaW9uaWNmcmFtZXdvcmsuY29tIC0gTUlUIExpY2Vuc2VcbiAqL1xuaW1wb3J0IHsgZyBhcyBnZXRTY3JvbGxFbGVtZW50LCBjIGFzIHNjcm9sbEJ5UG9pbnQsIGEgYXMgZmluZENsb3Nlc3RJb25Db250ZW50IH0gZnJvbSAnLi9pbmRleDkuanMnO1xuaW1wb3J0IHsgYSBhcyBhZGRFdmVudExpc3RlbmVyLCBiIGFzIHJlbW92ZUV2ZW50TGlzdGVuZXIsIHIgYXMgcmFmLCBwIGFzIHBvaW50ZXJDb29yZCwgYyBhcyBjb21wb25lbnRPblJlYWR5IH0gZnJvbSAnLi9oZWxwZXJzLmpzJztcblxuY29uc3QgY2xvbmVNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgcmVsb2NhdGVJbnB1dCA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgc2hvdWxkUmVsb2NhdGUsIGlucHV0UmVsYXRpdmVZID0gMCwgZGlzYWJsZWRDbG9uZWRJbnB1dCA9IGZhbHNlKSA9PiB7XG4gIGlmIChjbG9uZU1hcC5oYXMoY29tcG9uZW50RWwpID09PSBzaG91bGRSZWxvY2F0ZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2hvdWxkUmVsb2NhdGUpIHtcbiAgICBhZGRDbG9uZShjb21wb25lbnRFbCwgaW5wdXRFbCwgaW5wdXRSZWxhdGl2ZVksIGRpc2FibGVkQ2xvbmVkSW5wdXQpO1xuICB9XG4gIGVsc2Uge1xuICAgIHJlbW92ZUNsb25lKGNvbXBvbmVudEVsLCBpbnB1dEVsKTtcbiAgfVxufTtcbi8vIFRPRE8oRlctMjgzMik6IHR5cGVcbmNvbnN0IGlzRm9jdXNlZCA9IChpbnB1dCkgPT4ge1xuICByZXR1cm4gaW5wdXQgPT09IGlucHV0LmdldFJvb3ROb2RlKCkuYWN0aXZlRWxlbWVudDtcbn07XG5jb25zdCBhZGRDbG9uZSA9IChjb21wb25lbnRFbCwgaW5wdXRFbCwgaW5wdXRSZWxhdGl2ZVksIGRpc2FibGVkQ2xvbmVkSW5wdXQgPSBmYWxzZSkgPT4ge1xuICAvLyB0aGlzIGFsbG93cyBmb3IgdGhlIGFjdHVhbCBpbnB1dCB0byByZWNlaXZlIHRoZSBmb2N1cyBmcm9tXG4gIC8vIHRoZSB1c2VyJ3MgdG91Y2ggZXZlbnQsIGJ1dCBiZWZvcmUgaXQgcmVjZWl2ZXMgZm9jdXMsIGl0XG4gIC8vIG1vdmVzIHRoZSBhY3R1YWwgaW5wdXQgdG8gYSBsb2NhdGlvbiB0aGF0IHdpbGwgbm90IHNjcmV3XG4gIC8vIHVwIHRoZSBhcHAncyBsYXlvdXQsIGFuZCBkb2VzIG5vdCBhbGxvdyB0aGUgbmF0aXZlIGJyb3dzZXJcbiAgLy8gdG8gYXR0ZW1wdCB0byBzY3JvbGwgdGhlIGlucHV0IGludG8gcGxhY2UgKG1lc3NpbmcgdXAgaGVhZGVycy9mb290ZXJzKVxuICAvLyB0aGUgY2xvbmVkIGlucHV0IGZpbGxzIHRoZSBhcmVhIG9mIHdoZXJlIG5hdGl2ZSBpbnB1dCBzaG91bGQgYmVcbiAgLy8gd2hpbGUgdGhlIG5hdGl2ZSBpbnB1dCBmYWtlcyBvdXQgdGhlIGJyb3dzZXIgYnkgcmVsb2NhdGluZyBpdHNlbGZcbiAgLy8gYmVmb3JlIGl0IHJlY2VpdmVzIHRoZSBhY3R1YWwgZm9jdXMgZXZlbnRcbiAgLy8gV2UgaGlkZSB0aGUgZm9jdXNlZCBpbnB1dCAod2l0aCB0aGUgdmlzaWJsZSBjYXJldCkgaW52aXNpYmxlIGJ5IG1ha2luZyBpdCBzY2FsZSgwKSxcbiAgY29uc3QgcGFyZW50RWwgPSBpbnB1dEVsLnBhcmVudE5vZGU7XG4gIC8vIERPTSBXUklURVNcbiAgY29uc3QgY2xvbmVkRWwgPSBpbnB1dEVsLmNsb25lTm9kZShmYWxzZSk7XG4gIGNsb25lZEVsLmNsYXNzTGlzdC5hZGQoJ2Nsb25lZC1pbnB1dCcpO1xuICBjbG9uZWRFbC50YWJJbmRleCA9IC0xO1xuICAvKipcbiAgICogTWFraW5nIHRoZSBjbG9uZWQgaW5wdXQgZGlzYWJsZWQgcHJldmVudHNcbiAgICogQ2hyb21lIGZvciBBbmRyb2lkIGZyb20gc3RpbGwgc2Nyb2xsaW5nXG4gICAqIHRoZSBlbnRpcmUgcGFnZSBzaW5jZSB0aGlzIGNsb25lZCBpbnB1dFxuICAgKiB3aWxsIGJyaWVmbHkgYmUgaGlkZGVuIGJ5IHRoZSBrZXlib2FyZFxuICAgKiBldmVuIHRob3VnaCBpdCBpcyBub3QgZm9jdXNlZC5cbiAgICpcbiAgICogVGhpcyBpcyBub3QgbmVlZGVkIG9uIGlPUy4gV2hpbGUgdGhpc1xuICAgKiBkb2VzIG5vdCBjYXVzZSBmdW5jdGlvbmFsIGlzc3VlcyBvbiBpT1MsXG4gICAqIHRoZSBpbnB1dCBzdGlsbCBhcHBlYXJzIHNsaWdodGx5IGRpbW1lZCBldmVuXG4gICAqIGlmIHdlIHNldCBvcGFjaXR5OiAxLlxuICAgKi9cbiAgaWYgKGRpc2FibGVkQ2xvbmVkSW5wdXQpIHtcbiAgICBjbG9uZWRFbC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cbiAgcGFyZW50RWwuYXBwZW5kQ2hpbGQoY2xvbmVkRWwpO1xuICBjbG9uZU1hcC5zZXQoY29tcG9uZW50RWwsIGNsb25lZEVsKTtcbiAgY29uc3QgZG9jID0gY29tcG9uZW50RWwub3duZXJEb2N1bWVudDtcbiAgY29uc3QgdHggPSBkb2MuZGlyID09PSAncnRsJyA/IDk5OTkgOiAtOTk5OTtcbiAgY29tcG9uZW50RWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgaW5wdXRFbC5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlM2QoJHt0eH1weCwke2lucHV0UmVsYXRpdmVZfXB4LDApIHNjYWxlKDApYDtcbn07XG5jb25zdCByZW1vdmVDbG9uZSA9IChjb21wb25lbnRFbCwgaW5wdXRFbCkgPT4ge1xuICBjb25zdCBjbG9uZSA9IGNsb25lTWFwLmdldChjb21wb25lbnRFbCk7XG4gIGlmIChjbG9uZSkge1xuICAgIGNsb25lTWFwLmRlbGV0ZShjb21wb25lbnRFbCk7XG4gICAgY2xvbmUucmVtb3ZlKCk7XG4gIH1cbiAgY29tcG9uZW50RWwuc3R5bGUucG9pbnRlckV2ZW50cyA9ICcnO1xuICBpbnB1dEVsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xufTtcblxuY29uc3QgZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsKSA9PiB7XG4gIGlmICghc2Nyb2xsRWwgfHwgIWlucHV0RWwpIHtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgcmV0dXJuO1xuICAgIH07XG4gIH1cbiAgY29uc3Qgc2Nyb2xsSGlkZUNhcmV0ID0gKHNob3VsZEhpZGVDYXJldCkgPT4ge1xuICAgIGlmIChpc0ZvY3VzZWQoaW5wdXRFbCkpIHtcbiAgICAgIHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIHNob3VsZEhpZGVDYXJldCk7XG4gICAgfVxuICB9O1xuICBjb25zdCBvbkJsdXIgPSAoKSA9PiByZWxvY2F0ZUlucHV0KGNvbXBvbmVudEVsLCBpbnB1dEVsLCBmYWxzZSk7XG4gIGNvbnN0IGhpZGVDYXJldCA9ICgpID0+IHNjcm9sbEhpZGVDYXJldCh0cnVlKTtcbiAgY29uc3Qgc2hvd0NhcmV0ID0gKCkgPT4gc2Nyb2xsSGlkZUNhcmV0KGZhbHNlKTtcbiAgYWRkRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbFN0YXJ0JywgaGlkZUNhcmV0KTtcbiAgYWRkRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbEVuZCcsIHNob3dDYXJldCk7XG4gIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIG9uQmx1cik7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcihzY3JvbGxFbCwgJ2lvblNjcm9sbFN0YXJ0JywgaGlkZUNhcmV0KTtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKHNjcm9sbEVsLCAnaW9uU2Nyb2xsRW5kJywgc2hvd0NhcmV0KTtcbiAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbkJsdXInLCBvbkJsdXIpO1xuICB9O1xufTtcblxuY29uc3QgU0tJUF9TRUxFQ1RPUiA9ICdpbnB1dCwgdGV4dGFyZWEsIFtuby1ibHVyXSwgW2NvbnRlbnRlZGl0YWJsZV0nO1xuY29uc3QgZW5hYmxlSW5wdXRCbHVycmluZyA9ICgpID0+IHtcbiAgbGV0IGZvY3VzZWQgPSB0cnVlO1xuICBsZXQgZGlkU2Nyb2xsID0gZmFsc2U7XG4gIGNvbnN0IGRvYyA9IGRvY3VtZW50O1xuICBjb25zdCBvblNjcm9sbCA9ICgpID0+IHtcbiAgICBkaWRTY3JvbGwgPSB0cnVlO1xuICB9O1xuICBjb25zdCBvbkZvY3VzaW4gPSAoKSA9PiB7XG4gICAgZm9jdXNlZCA9IHRydWU7XG4gIH07XG4gIGNvbnN0IG9uVG91Y2hlbmQgPSAoZXYpID0+IHtcbiAgICAvLyBpZiBhcHAgZGlkIHNjcm9sbCByZXR1cm4gZWFybHlcbiAgICBpZiAoZGlkU2Nyb2xsKSB7XG4gICAgICBkaWRTY3JvbGwgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgYWN0aXZlID0gZG9jLmFjdGl2ZUVsZW1lbnQ7XG4gICAgaWYgKCFhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gb25seSBibHVyIGlmIHRoZSBhY3RpdmUgZWxlbWVudCBpcyBhIHRleHQtaW5wdXQgb3IgYSB0ZXh0YXJlYVxuICAgIGlmIChhY3RpdmUubWF0Y2hlcyhTS0lQX1NFTEVDVE9SKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBpZiB0aGUgc2VsZWN0ZWQgdGFyZ2V0IGlzIHRoZSBhY3RpdmUgZWxlbWVudCwgZG8gbm90IGJsdXJcbiAgICBjb25zdCB0YXBwZWQgPSBldi50YXJnZXQ7XG4gICAgaWYgKHRhcHBlZCA9PT0gYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0YXBwZWQubWF0Y2hlcyhTS0lQX1NFTEVDVE9SKSB8fCB0YXBwZWQuY2xvc2VzdChTS0lQX1NFTEVDVE9SKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb2N1c2VkID0gZmFsc2U7XG4gICAgLy8gVE9ETyBGVy0yNzk2OiBmaW5kIGEgYmV0dGVyIHdheSwgd2h5IDUwbXM/XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoIWZvY3VzZWQpIHtcbiAgICAgICAgYWN0aXZlLmJsdXIoKTtcbiAgICAgIH1cbiAgICB9LCA1MCk7XG4gIH07XG4gIGFkZEV2ZW50TGlzdGVuZXIoZG9jLCAnaW9uU2Nyb2xsU3RhcnQnLCBvblNjcm9sbCk7XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luLCB0cnVlKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgb25Ub3VjaGVuZCwgZmFsc2UpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAnaW9uU2Nyb2xsU3RhcnQnLCBvblNjcm9sbCwgdHJ1ZSk7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4sIHRydWUpO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG9uVG91Y2hlbmQsIGZhbHNlKTtcbiAgfTtcbn07XG5cbmNvbnN0IFNDUk9MTF9BU1NJU1RfU1BFRUQgPSAwLjM7XG5jb25zdCBnZXRTY3JvbGxEYXRhID0gKGNvbXBvbmVudEVsLCBjb250ZW50RWwsIGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIHZhciBfYTtcbiAgY29uc3QgaXRlbUVsID0gKF9hID0gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWl0ZW0sW2lvbi1pdGVtXScpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb21wb25lbnRFbDtcbiAgcmV0dXJuIGNhbGNTY3JvbGxEYXRhKGl0ZW1FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSwgY29udGVudEVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLCBrZXlib2FyZEhlaWdodCwgY29tcG9uZW50RWwub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5pbm5lckhlaWdodCAvLyBUT0RPKEZXLTI4MzIpOiB0eXBlXG4gICk7XG59O1xuY29uc3QgY2FsY1Njcm9sbERhdGEgPSAoaW5wdXRSZWN0LCBjb250ZW50UmVjdCwga2V5Ym9hcmRIZWlnaHQsIHBsYXRmb3JtSGVpZ2h0KSA9PiB7XG4gIC8vIGNvbXB1dGUgaW5wdXQncyBZIHZhbHVlcyByZWxhdGl2ZSB0byB0aGUgYm9keVxuICBjb25zdCBpbnB1dFRvcCA9IGlucHV0UmVjdC50b3A7XG4gIGNvbnN0IGlucHV0Qm90dG9tID0gaW5wdXRSZWN0LmJvdHRvbTtcbiAgLy8gY29tcHV0ZSB2aXNpYmxlIGFyZWFcbiAgY29uc3QgdmlzaWJsZUFyZWFUb3AgPSBjb250ZW50UmVjdC50b3A7XG4gIGNvbnN0IHZpc2libGVBcmVhQm90dG9tID0gTWF0aC5taW4oY29udGVudFJlY3QuYm90dG9tLCBwbGF0Zm9ybUhlaWdodCAtIGtleWJvYXJkSGVpZ2h0KTtcbiAgLy8gY29tcHV0ZSBzYWZlIGFyZWFcbiAgY29uc3Qgc2FmZUFyZWFUb3AgPSB2aXNpYmxlQXJlYVRvcCArIDE1O1xuICBjb25zdCBzYWZlQXJlYUJvdHRvbSA9IHZpc2libGVBcmVhQm90dG9tICogMC43NTtcbiAgLy8gZmlndXJlIG91dCBpZiBlYWNoIGVkZ2Ugb2YgdGhlIGlucHV0IGlzIHdpdGhpbiB0aGUgc2FmZSBhcmVhXG4gIGNvbnN0IGRpc3RhbmNlVG9Cb3R0b20gPSBzYWZlQXJlYUJvdHRvbSAtIGlucHV0Qm90dG9tO1xuICBjb25zdCBkaXN0YW5jZVRvVG9wID0gc2FmZUFyZWFUb3AgLSBpbnB1dFRvcDtcbiAgLy8gZGVzaXJlZFNjcm9sbEFtb3VudCBpcyB0aGUgbmVnYXRlZCBkaXN0YW5jZSB0byB0aGUgc2FmZSBhcmVhIGFjY29yZGluZyB0byBvdXIgY2FsY3VsYXRpb25zLlxuICBjb25zdCBkZXNpcmVkU2Nyb2xsQW1vdW50ID0gTWF0aC5yb3VuZChkaXN0YW5jZVRvQm90dG9tIDwgMCA/IC1kaXN0YW5jZVRvQm90dG9tIDogZGlzdGFuY2VUb1RvcCA+IDAgPyAtZGlzdGFuY2VUb1RvcCA6IDApO1xuICAvLyBvdXIgY2FsY3VsYXRpb25zIG1ha2Ugc29tZSBhc3N1bXB0aW9ucyB0aGF0IGFyZW4ndCBhbHdheXMgdHJ1ZSwgbGlrZSB0aGUga2V5Ym9hcmQgYmVpbmcgY2xvc2VkIHdoZW4gYW4gaW5wdXRcbiAgLy8gZ2V0cyBmb2N1cywgc28gbWFrZSBzdXJlIHdlIGRvbid0IHNjcm9sbCB0aGUgaW5wdXQgYWJvdmUgdGhlIHZpc2libGUgYXJlYVxuICBjb25zdCBzY3JvbGxBbW91bnQgPSBNYXRoLm1pbihkZXNpcmVkU2Nyb2xsQW1vdW50LCBpbnB1dFRvcCAtIHZpc2libGVBcmVhVG9wKTtcbiAgY29uc3QgZGlzdGFuY2UgPSBNYXRoLmFicyhzY3JvbGxBbW91bnQpO1xuICBjb25zdCBkdXJhdGlvbiA9IGRpc3RhbmNlIC8gU0NST0xMX0FTU0lTVF9TUEVFRDtcbiAgY29uc3Qgc2Nyb2xsRHVyYXRpb24gPSBNYXRoLm1pbig0MDAsIE1hdGgubWF4KDE1MCwgZHVyYXRpb24pKTtcbiAgcmV0dXJuIHtcbiAgICBzY3JvbGxBbW91bnQsXG4gICAgc2Nyb2xsRHVyYXRpb24sXG4gICAgc2Nyb2xsUGFkZGluZzoga2V5Ym9hcmRIZWlnaHQsXG4gICAgaW5wdXRTYWZlWTogLShpbnB1dFRvcCAtIHNhZmVBcmVhVG9wKSArIDQsXG4gIH07XG59O1xuXG5jb25zdCBlbmFibGVTY3JvbGxBc3Npc3QgPSAoY29tcG9uZW50RWwsIGlucHV0RWwsIGNvbnRlbnRFbCwgZm9vdGVyRWwsIGtleWJvYXJkSGVpZ2h0LCBkaXNhYmxlQ2xvbmVkSW5wdXQgPSBmYWxzZSkgPT4ge1xuICBsZXQgY29vcmQ7XG4gIGNvbnN0IHRvdWNoU3RhcnQgPSAoZXYpID0+IHtcbiAgICBjb29yZCA9IHBvaW50ZXJDb29yZChldik7XG4gIH07XG4gIGNvbnN0IHRvdWNoRW5kID0gKGV2KSA9PiB7XG4gICAgLy8gaW5wdXQgY292ZXIgdG91Y2hlbmQvbW91c2V1cFxuICAgIGlmICghY29vcmQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gZ2V0IHdoZXJlIHRoZSB0b3VjaGVuZC9tb3VzZXVwIGVuZGVkXG4gICAgY29uc3QgZW5kQ29vcmQgPSBwb2ludGVyQ29vcmQoZXYpO1xuICAgIC8vIGZvY3VzIHRoaXMgaW5wdXQgaWYgdGhlIHBvaW50ZXIgaGFzbid0IG1vdmVkIFhYIHBpeGVsc1xuICAgIC8vIGFuZCB0aGUgaW5wdXQgZG9lc24ndCBhbHJlYWR5IGhhdmUgZm9jdXNcbiAgICBpZiAoIWhhc1BvaW50ZXJNb3ZlZCg2LCBjb29yZCwgZW5kQ29vcmQpICYmICFpc0ZvY3VzZWQoaW5wdXRFbCkpIHtcbiAgICAgIC8vIGJlZ2luIHRoZSBpbnB1dCBmb2N1cyBwcm9jZXNzXG4gICAgICBqc1NldEZvY3VzKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCwgZGlzYWJsZUNsb25lZElucHV0KTtcbiAgICB9XG4gIH07XG4gIGNvbXBvbmVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0b3VjaFN0YXJ0LCB7IGNhcHR1cmU6IHRydWUsIHBhc3NpdmU6IHRydWUgfSk7XG4gIGNvbXBvbmVudEVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdG91Y2hFbmQsIHRydWUpO1xuICByZXR1cm4gKCkgPT4ge1xuICAgIGNvbXBvbmVudEVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0b3VjaFN0YXJ0LCB0cnVlKTtcbiAgICBjb21wb25lbnRFbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRvdWNoRW5kLCB0cnVlKTtcbiAgfTtcbn07XG5jb25zdCBqc1NldEZvY3VzID0gYXN5bmMgKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBjb250ZW50RWwsIGZvb3RlckVsLCBrZXlib2FyZEhlaWdodCwgZGlzYWJsZUNsb25lZElucHV0ID0gZmFsc2UpID0+IHtcbiAgaWYgKCFjb250ZW50RWwgJiYgIWZvb3RlckVsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IHNjcm9sbERhdGEgPSBnZXRTY3JvbGxEYXRhKGNvbXBvbmVudEVsLCAoY29udGVudEVsIHx8IGZvb3RlckVsKSwga2V5Ym9hcmRIZWlnaHQpO1xuICBpZiAoY29udGVudEVsICYmIE1hdGguYWJzKHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50KSA8IDQpIHtcbiAgICAvLyB0aGUgdGV4dCBpbnB1dCBpcyBpbiBhIHNhZmUgcG9zaXRpb24gdGhhdCBkb2Vzbid0XG4gICAgLy8gcmVxdWlyZSBpdCB0byBiZSBzY3JvbGxlZCBpbnRvIHZpZXcsIGp1c3Qgc2V0IGZvY3VzIG5vd1xuICAgIGlucHV0RWwuZm9jdXMoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gdGVtcG9yYXJpbHkgbW92ZSB0aGUgZm9jdXMgdG8gdGhlIGZvY3VzIGhvbGRlciBzbyB0aGUgYnJvd3NlclxuICAvLyBkb2Vzbid0IGZyZWFrIG91dCB3aGlsZSBpdCdzIHRyeWluZyB0byBnZXQgdGhlIGlucHV0IGluIHBsYWNlXG4gIC8vIGF0IHRoaXMgcG9pbnQgdGhlIG5hdGl2ZSB0ZXh0IGlucHV0IHN0aWxsIGRvZXMgbm90IGhhdmUgZm9jdXNcbiAgcmVsb2NhdGVJbnB1dChjb21wb25lbnRFbCwgaW5wdXRFbCwgdHJ1ZSwgc2Nyb2xsRGF0YS5pbnB1dFNhZmVZLCBkaXNhYmxlQ2xvbmVkSW5wdXQpO1xuICBpbnB1dEVsLmZvY3VzKCk7XG4gIC8qKlxuICAgKiBSZWxvY2F0aW5nL0ZvY3VzaW5nIGlucHV0IGNhdXNlcyB0aGVcbiAgICogY2xpY2sgZXZlbnQgdG8gYmUgY2FuY2VsbGVkLCBzb1xuICAgKiBtYW51YWxseSBmaXJlIG9uZSBoZXJlLlxuICAgKi9cbiAgcmFmKCgpID0+IGNvbXBvbmVudEVsLmNsaWNrKCkpO1xuICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBsZXQgc2Nyb2xsQ29udGVudFRpbWVvdXQ7XG4gICAgY29uc3Qgc2Nyb2xsQ29udGVudCA9IGFzeW5jICgpID0+IHtcbiAgICAgIC8vIGNsZWFuIHVwIGxpc3RlbmVycyBhbmQgdGltZW91dHNcbiAgICAgIGlmIChzY3JvbGxDb250ZW50VGltZW91dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChzY3JvbGxDb250ZW50VGltZW91dCk7XG4gICAgICB9XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaW9uS2V5Ym9hcmREaWRTaG93JywgZG91YmxlS2V5Ym9hcmRFdmVudExpc3RlbmVyKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICAgIC8vIHNjcm9sbCB0aGUgaW5wdXQgaW50byBwbGFjZVxuICAgICAgaWYgKGNvbnRlbnRFbCkge1xuICAgICAgICBhd2FpdCBzY3JvbGxCeVBvaW50KGNvbnRlbnRFbCwgMCwgc2Nyb2xsRGF0YS5zY3JvbGxBbW91bnQsIHNjcm9sbERhdGEuc2Nyb2xsRHVyYXRpb24pO1xuICAgICAgfVxuICAgICAgLy8gdGhlIHNjcm9sbCB2aWV3IGlzIGluIHRoZSBjb3JyZWN0IHBvc2l0aW9uIG5vd1xuICAgICAgLy8gZ2l2ZSB0aGUgbmF0aXZlIHRleHQgaW5wdXQgZm9jdXNcbiAgICAgIHJlbG9jYXRlSW5wdXQoY29tcG9uZW50RWwsIGlucHV0RWwsIGZhbHNlLCBzY3JvbGxEYXRhLmlucHV0U2FmZVkpO1xuICAgICAgLy8gZW5zdXJlIHRoaXMgaXMgdGhlIGZvY3VzZWQgaW5wdXRcbiAgICAgIGlucHV0RWwuZm9jdXMoKTtcbiAgICB9O1xuICAgIGNvbnN0IGRvdWJsZUtleWJvYXJkRXZlbnRMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2lvbktleWJvYXJkRGlkU2hvdycsIHNjcm9sbENvbnRlbnQpO1xuICAgIH07XG4gICAgaWYgKGNvbnRlbnRFbCkge1xuICAgICAgY29uc3Qgc2Nyb2xsRWwgPSBhd2FpdCBnZXRTY3JvbGxFbGVtZW50KGNvbnRlbnRFbCk7XG4gICAgICAvKipcbiAgICAgICAqIHNjcm9sbERhdGEgd2lsbCBvbmx5IGNvbnNpZGVyIHRoZSBhbW91bnQgd2UgbmVlZFxuICAgICAgICogdG8gc2Nyb2xsIGluIG9yZGVyIHRvIHByb3Blcmx5IGJyaW5nIHRoZSBpbnB1dFxuICAgICAgICogaW50byB2aWV3LiBJdCB3aWxsIG5vdCBjb25zaWRlciB0aGUgYW1vdW50XG4gICAgICAgKiB3ZSBjYW4gc2Nyb2xsIGluIHRoZSBjb250ZW50IGVsZW1lbnQuXG4gICAgICAgKiBBcyBhIHJlc3VsdCwgc2Nyb2xsRGF0YSBtYXkgcmVxdWVzdCBhIGdyZWF0ZXJcbiAgICAgICAqIHNjcm9sbCBwb3NpdGlvbiB0aGFuIGlzIGN1cnJlbnRseSBhdmFpbGFibGVcbiAgICAgICAqIGluIHRoZSBET00uIElmIHRoaXMgaXMgdGhlIGNhc2UsIHdlIG5lZWQgdG9cbiAgICAgICAqIHdhaXQgZm9yIHRoZSB3ZWJ2aWV3IHRvIHJlc2l6ZS90aGUga2V5Ym9hcmRcbiAgICAgICAqIHRvIHNob3cgaW4gb3JkZXIgZm9yIGFkZGl0aW9uYWwgc2Nyb2xsXG4gICAgICAgKiBiYW5kd2lkdGggdG8gYmVjb21lIGF2YWlsYWJsZS5cbiAgICAgICAqL1xuICAgICAgY29uc3QgdG90YWxTY3JvbGxBbW91bnQgPSBzY3JvbGxFbC5zY3JvbGxIZWlnaHQgLSBzY3JvbGxFbC5jbGllbnRIZWlnaHQ7XG4gICAgICBpZiAoc2Nyb2xsRGF0YS5zY3JvbGxBbW91bnQgPiB0b3RhbFNjcm9sbEFtb3VudCAtIHNjcm9sbEVsLnNjcm9sbFRvcCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogT24gaU9TIGRldmljZXMsIHRoZSBzeXN0ZW0gd2lsbCBzaG93IGEgXCJQYXNzd29yZHNcIiBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgICAgICAqIGFmdGVyIHRoZSBpbml0aWFsIGtleWJvYXJkIGlzIHNob3duLiBUaGlzIHByZXZlbnRzIHRoZSB3ZWJ2aWV3IGZyb20gcmVzaXppbmdcbiAgICAgICAgICogdW50aWwgdGhlIFwiUGFzc3dvcmRzXCIgYmFyIGlzIHNob3duLCBzbyB3ZSBuZWVkIHRvIHdhaXQgZm9yIHRoYXQgdG8gaGFwcGVuIGZpcnN0LlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGlucHV0RWwudHlwZSA9PT0gJ3Bhc3N3b3JkJykge1xuICAgICAgICAgIC8vIEFkZCA1MHB4IHRvIGFjY291bnQgZm9yIHRoZSBcIlBhc3N3b3Jkc1wiIGJhclxuICAgICAgICAgIHNjcm9sbERhdGEuc2Nyb2xsQW1vdW50ICs9IDUwO1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdpb25LZXlib2FyZERpZFNob3cnLCBzY3JvbGxDb250ZW50KTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogVGhpcyBzaG91bGQgb25seSBmaXJlIGluIDIgaW5zdGFuY2VzOlxuICAgICAgICAgKiAxLiBUaGUgYXBwIGlzIHZlcnkgc2xvdy5cbiAgICAgICAgICogMi4gVGhlIGFwcCBpcyBydW5uaW5nIGluIGEgYnJvd3NlciBvbiBhbiBvbGQgT1NcbiAgICAgICAgICogdGhhdCBkb2VzIG5vdCBzdXBwb3J0IElvbmljIEtleWJvYXJkIEV2ZW50c1xuICAgICAgICAgKi9cbiAgICAgICAgc2Nyb2xsQ29udGVudFRpbWVvdXQgPSBzZXRUaW1lb3V0KHNjcm9sbENvbnRlbnQsIDEwMDApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHNjcm9sbENvbnRlbnQoKTtcbiAgfVxufTtcbmNvbnN0IGhhc1BvaW50ZXJNb3ZlZCA9ICh0aHJlc2hvbGQsIHN0YXJ0Q29vcmQsIGVuZENvb3JkKSA9PiB7XG4gIGlmIChzdGFydENvb3JkICYmIGVuZENvb3JkKSB7XG4gICAgY29uc3QgZGVsdGFYID0gc3RhcnRDb29yZC54IC0gZW5kQ29vcmQueDtcbiAgICBjb25zdCBkZWx0YVkgPSBzdGFydENvb3JkLnkgLSBlbmRDb29yZC55O1xuICAgIGNvbnN0IGRpc3RhbmNlID0gZGVsdGFYICogZGVsdGFYICsgZGVsdGFZICogZGVsdGFZO1xuICAgIHJldHVybiBkaXN0YW5jZSA+IHRocmVzaG9sZCAqIHRocmVzaG9sZDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBQQURESU5HX1RJTUVSX0tFWSA9ICckaW9uUGFkZGluZ1RpbWVyJztcbmNvbnN0IGVuYWJsZVNjcm9sbFBhZGRpbmcgPSAoa2V5Ym9hcmRIZWlnaHQpID0+IHtcbiAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gIC8vIFRPRE8oRlctMjgzMik6IHR5cGVzXG4gIGNvbnN0IG9uRm9jdXNpbiA9IChldikgPT4ge1xuICAgIHNldFNjcm9sbFBhZGRpbmcoZXYudGFyZ2V0LCBrZXlib2FyZEhlaWdodCk7XG4gIH07XG4gIGNvbnN0IG9uRm9jdXNvdXQgPSAoZXYpID0+IHtcbiAgICBzZXRTY3JvbGxQYWRkaW5nKGV2LnRhcmdldCwgMCk7XG4gIH07XG4gIGRvYy5hZGRFdmVudExpc3RlbmVyKCdmb2N1c2luJywgb25Gb2N1c2luKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0Jywgb25Gb2N1c291dCk7XG4gIHJldHVybiAoKSA9PiB7XG4gICAgZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBvbkZvY3VzaW4pO1xuICAgIGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIG9uRm9jdXNvdXQpO1xuICB9O1xufTtcbmNvbnN0IHNldFNjcm9sbFBhZGRpbmcgPSAoaW5wdXQsIGtleWJvYXJkSGVpZ2h0KSA9PiB7XG4gIHZhciBfYSwgX2I7XG4gIGlmIChpbnB1dC50YWdOYW1lICE9PSAnSU5QVVQnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChpbnB1dC5wYXJlbnRFbGVtZW50ICYmIGlucHV0LnBhcmVudEVsZW1lbnQudGFnTmFtZSA9PT0gJ0lPTi1JTlBVVCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCgoX2IgPSAoX2EgPSBpbnB1dC5wYXJlbnRFbGVtZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGFyZW50RWxlbWVudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnRhZ05hbWUpID09PSAnSU9OLVNFQVJDSEJBUicpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgZWwgPSBmaW5kQ2xvc2VzdElvbkNvbnRlbnQoaW5wdXQpO1xuICBpZiAoZWwgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgdGltZXIgPSBlbFtQQURESU5HX1RJTUVSX0tFWV07XG4gIGlmICh0aW1lcikge1xuICAgIGNsZWFyVGltZW91dCh0aW1lcik7XG4gIH1cbiAgaWYgKGtleWJvYXJkSGVpZ2h0ID4gMCkge1xuICAgIGVsLnN0eWxlLnNldFByb3BlcnR5KCctLWtleWJvYXJkLW9mZnNldCcsIGAke2tleWJvYXJkSGVpZ2h0fXB4YCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgZWxbUEFERElOR19USU1FUl9LRVldID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBlbC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1rZXlib2FyZC1vZmZzZXQnLCAnMHB4Jyk7XG4gICAgfSwgMTIwKTtcbiAgfVxufTtcblxuY29uc3QgSU5QVVRfQkxVUlJJTkcgPSB0cnVlO1xuY29uc3QgU0NST0xMX1BBRERJTkcgPSB0cnVlO1xuY29uc3Qgc3RhcnRJbnB1dFNoaW1zID0gKGNvbmZpZywgcGxhdGZvcm0pID0+IHtcbiAgY29uc3QgZG9jID0gZG9jdW1lbnQ7XG4gIGNvbnN0IGlzSU9TID0gcGxhdGZvcm0gPT09ICdpb3MnO1xuICBjb25zdCBpc0FuZHJvaWQgPSBwbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnO1xuICAvKipcbiAgICogSGlkZSBDYXJldCBhbmQgSW5wdXQgQmx1cnJpbmcgYXJlIG5lZWRlZCBvbiBpT1MuXG4gICAqIFNjcm9sbCBBc3Npc3QgYW5kIFNjcm9sbCBQYWRkaW5nIGFyZSBuZWVkZWQgb24gaU9TIGFuZCBBbmRyb2lkXG4gICAqIHdpdGggQ2hyb21lIHdlYiBicm93c2VyIChub3QgQ2hyb21lIHdlYnZpZXcpLlxuICAgKi9cbiAgY29uc3Qga2V5Ym9hcmRIZWlnaHQgPSBjb25maWcuZ2V0TnVtYmVyKCdrZXlib2FyZEhlaWdodCcsIDI5MCk7XG4gIGNvbnN0IHNjcm9sbEFzc2lzdCA9IGNvbmZpZy5nZXRCb29sZWFuKCdzY3JvbGxBc3Npc3QnLCB0cnVlKTtcbiAgY29uc3QgaGlkZUNhcmV0ID0gY29uZmlnLmdldEJvb2xlYW4oJ2hpZGVDYXJldE9uU2Nyb2xsJywgaXNJT1MpO1xuICBjb25zdCBpbnB1dEJsdXJyaW5nID0gY29uZmlnLmdldEJvb2xlYW4oJ2lucHV0Qmx1cnJpbmcnLCBpc0lPUyk7XG4gIGNvbnN0IHNjcm9sbFBhZGRpbmcgPSBjb25maWcuZ2V0Qm9vbGVhbignc2Nyb2xsUGFkZGluZycsIHRydWUpO1xuICBjb25zdCBpbnB1dHMgPSBBcnJheS5mcm9tKGRvYy5xdWVyeVNlbGVjdG9yQWxsKCdpb24taW5wdXQsIGlvbi10ZXh0YXJlYScpKTtcbiAgY29uc3QgaGlkZUNhcmV0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3Qgc2Nyb2xsQXNzaXN0TWFwID0gbmV3IFdlYWtNYXAoKTtcbiAgY29uc3QgcmVnaXN0ZXJJbnB1dCA9IGFzeW5jIChjb21wb25lbnRFbCkgPT4ge1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBjb21wb25lbnRPblJlYWR5KGNvbXBvbmVudEVsLCByZXNvbHZlKSk7XG4gICAgY29uc3QgaW5wdXRSb290ID0gY29tcG9uZW50RWwuc2hhZG93Um9vdCB8fCBjb21wb25lbnRFbDtcbiAgICBjb25zdCBpbnB1dEVsID0gaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0JykgfHwgaW5wdXRSb290LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XG4gICAgY29uc3Qgc2Nyb2xsRWwgPSBmaW5kQ2xvc2VzdElvbkNvbnRlbnQoY29tcG9uZW50RWwpO1xuICAgIGNvbnN0IGZvb3RlckVsID0gIXNjcm9sbEVsID8gY29tcG9uZW50RWwuY2xvc2VzdCgnaW9uLWZvb3RlcicpIDogbnVsbDtcbiAgICBpZiAoIWlucHV0RWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCEhc2Nyb2xsRWwgJiYgaGlkZUNhcmV0ICYmICFoaWRlQ2FyZXRNYXAuaGFzKGNvbXBvbmVudEVsKSkge1xuICAgICAgY29uc3Qgcm1GbiA9IGVuYWJsZUhpZGVDYXJldE9uU2Nyb2xsKGNvbXBvbmVudEVsLCBpbnB1dEVsLCBzY3JvbGxFbCk7XG4gICAgICBoaWRlQ2FyZXRNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogZGF0ZS9kYXRldGltZS1sb2NhbGUgaW5wdXRzIG9uIG1vYmlsZSBkZXZpY2VzIHNob3cgZGF0ZSBwaWNrZXJcbiAgICAgKiBvdmVybGF5cyBpbnN0ZWFkIG9mIGtleWJvYXJkcy4gQXMgYSByZXN1bHQsIHNjcm9sbCBhc3Npc3QgaXNcbiAgICAgKiBub3QgbmVlZGVkLiBUaGlzIGFsc28gd29ya3MgYXJvdW5kIGEgYnVnIGluIGlPUyA8MTYgd2hlcmVcbiAgICAgKiBzY3JvbGwgYXNzaXN0IGNhdXNlcyB0aGUgYnJvd3NlciB0byBsb2NrIHVwLiBTZWUgRlctMTk5Ny5cbiAgICAgKi9cbiAgICBjb25zdCBpc0RhdGVJbnB1dCA9IGlucHV0RWwudHlwZSA9PT0gJ2RhdGUnIHx8IGlucHV0RWwudHlwZSA9PT0gJ2RhdGV0aW1lLWxvY2FsJztcbiAgICBpZiAoIWlzRGF0ZUlucHV0ICYmXG4gICAgICAoISFzY3JvbGxFbCB8fCAhIWZvb3RlckVsKSAmJlxuICAgICAgc2Nyb2xsQXNzaXN0ICYmXG4gICAgICAhc2Nyb2xsQXNzaXN0TWFwLmhhcyhjb21wb25lbnRFbCkpIHtcbiAgICAgIGNvbnN0IHJtRm4gPSBlbmFibGVTY3JvbGxBc3Npc3QoY29tcG9uZW50RWwsIGlucHV0RWwsIHNjcm9sbEVsLCBmb290ZXJFbCwga2V5Ym9hcmRIZWlnaHQsIGlzQW5kcm9pZCk7XG4gICAgICBzY3JvbGxBc3Npc3RNYXAuc2V0KGNvbXBvbmVudEVsLCBybUZuKTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHVucmVnaXN0ZXJJbnB1dCA9IChjb21wb25lbnRFbCkgPT4ge1xuICAgIGlmIChoaWRlQ2FyZXQpIHtcbiAgICAgIGNvbnN0IGZuID0gaGlkZUNhcmV0TWFwLmdldChjb21wb25lbnRFbCk7XG4gICAgICBpZiAoZm4pIHtcbiAgICAgICAgZm4oKTtcbiAgICAgIH1cbiAgICAgIGhpZGVDYXJldE1hcC5kZWxldGUoY29tcG9uZW50RWwpO1xuICAgIH1cbiAgICBpZiAoc2Nyb2xsQXNzaXN0KSB7XG4gICAgICBjb25zdCBmbiA9IHNjcm9sbEFzc2lzdE1hcC5nZXQoY29tcG9uZW50RWwpO1xuICAgICAgaWYgKGZuKSB7XG4gICAgICAgIGZuKCk7XG4gICAgICB9XG4gICAgICBzY3JvbGxBc3Npc3RNYXAuZGVsZXRlKGNvbXBvbmVudEVsKTtcbiAgICB9XG4gIH07XG4gIGlmIChpbnB1dEJsdXJyaW5nICYmIElOUFVUX0JMVVJSSU5HKSB7XG4gICAgZW5hYmxlSW5wdXRCbHVycmluZygpO1xuICB9XG4gIGlmIChzY3JvbGxQYWRkaW5nICYmIFNDUk9MTF9QQURESU5HKSB7XG4gICAgZW5hYmxlU2Nyb2xsUGFkZGluZyhrZXlib2FyZEhlaWdodCk7XG4gIH1cbiAgLy8gSW5wdXQgbWlnaHQgYmUgYWxyZWFkeSBsb2FkZWQgaW4gdGhlIERPTSBiZWZvcmUgaW9uLWRldmljZS1oYWNrcyBkaWQuXG4gIC8vIEF0IHRoaXMgcG9pbnQgd2UgbmVlZCB0byBsb29rIGZvciBhbGwgb2YgdGhlIGlucHV0cyBub3QgcmVnaXN0ZXJlZCB5ZXRcbiAgLy8gYW5kIHJlZ2lzdGVyIHRoZW0uXG4gIGZvciAoY29uc3QgaW5wdXQgb2YgaW5wdXRzKSB7XG4gICAgcmVnaXN0ZXJJbnB1dChpbnB1dCk7XG4gIH1cbiAgLy8gVE9ETyhGVy0yODMyKTogdHlwZXNcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkTG9hZCcsICgoZXYpID0+IHtcbiAgICByZWdpc3RlcklucHV0KGV2LmRldGFpbCk7XG4gIH0pKTtcbiAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoJ2lvbklucHV0RGlkVW5sb2FkJywgKChldikgPT4ge1xuICAgIHVucmVnaXN0ZXJJbnB1dChldi5kZXRhaWwpO1xuICB9KSk7XG59O1xuXG5leHBvcnQgeyBzdGFydElucHV0U2hpbXMgfTtcbiJdLCJuYW1lcyI6WyJjbG9uZU1hcCIsIldlYWtNYXAiLCJyZWxvY2F0ZUlucHV0IiwiY29tcG9uZW50RWwiLCJpbnB1dEVsIiwic2hvdWxkUmVsb2NhdGUiLCJpbnB1dFJlbGF0aXZlWSIsImRpc2FibGVkQ2xvbmVkSW5wdXQiLCJoYXMiLCJhZGRDbG9uZSIsInJlbW92ZUNsb25lIiwiaXNGb2N1c2VkIiwiaW5wdXQiLCJnZXRSb290Tm9kZSIsImFjdGl2ZUVsZW1lbnQiLCJwYXJlbnRFbCIsInBhcmVudE5vZGUiLCJjbG9uZWRFbCIsImNsb25lTm9kZSIsImNsYXNzTGlzdCIsImFkZCIsInRhYkluZGV4IiwiZGlzYWJsZWQiLCJhcHBlbmRDaGlsZCIsInNldCIsImRvYyIsIm93bmVyRG9jdW1lbnQiLCJ0eCIsImRpciIsInN0eWxlIiwicG9pbnRlckV2ZW50cyIsInRyYW5zZm9ybSIsImNsb25lIiwiZ2V0IiwiZGVsZXRlIiwicmVtb3ZlIiwiZW5hYmxlSGlkZUNhcmV0T25TY3JvbGwiLCJzY3JvbGxFbCIsInNjcm9sbEhpZGVDYXJldCIsInNob3VsZEhpZGVDYXJldCIsIm9uQmx1ciIsImhpZGVDYXJldCIsInNob3dDYXJldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiU0tJUF9TRUxFQ1RPUiIsImdldFNjcm9sbERhdGEiLCJjb250ZW50RWwiLCJrZXlib2FyZEhlaWdodCIsIl9hIiwiaXRlbUVsIiwiY2xvc2VzdCIsImNhbGNTY3JvbGxEYXRhIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiZGVmYXVsdFZpZXciLCJpbm5lckhlaWdodCIsImlucHV0UmVjdCIsImNvbnRlbnRSZWN0IiwicGxhdGZvcm1IZWlnaHQiLCJpbnB1dFRvcCIsInRvcCIsImlucHV0Qm90dG9tIiwiYm90dG9tIiwidmlzaWJsZUFyZWFUb3AiLCJzYWZlQXJlYVRvcCIsImRpc3RhbmNlVG9Cb3R0b20iLCJNYXRoIiwibWluIiwiZGlzdGFuY2VUb1RvcCIsImRlc2lyZWRTY3JvbGxBbW91bnQiLCJyb3VuZCIsInNjcm9sbEFtb3VudCIsImR1cmF0aW9uIiwiYWJzIiwic2Nyb2xsRHVyYXRpb24iLCJtYXgiLCJzY3JvbGxQYWRkaW5nIiwiaW5wdXRTYWZlWSIsImVuYWJsZVNjcm9sbEFzc2lzdCIsImZvb3RlckVsIiwiY29vcmQiLCJkaXNhYmxlQ2xvbmVkSW5wdXQiLCJ0b3VjaFN0YXJ0IiwiZXYiLCJwb2ludGVyQ29vcmQiLCJ0b3VjaEVuZCIsImVuZENvb3JkIiwiaGFzUG9pbnRlck1vdmVkIiwianNTZXRGb2N1cyIsImNhcHR1cmUiLCJwYXNzaXZlIiwic2Nyb2xsRGF0YSIsImZvY3VzIiwicmFmIiwiY2xpY2siLCJ3aW5kb3ciLCJzY3JvbGxDb250ZW50IiwidW5kZWZpbmVkIiwic2Nyb2xsQ29udGVudFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJkb3VibGVLZXlib2FyZEV2ZW50TGlzdGVuZXIiLCJzY3JvbGxCeVBvaW50IiwiZ2V0U2Nyb2xsRWxlbWVudCIsInRvdGFsU2Nyb2xsQW1vdW50Iiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0Iiwic2Nyb2xsVG9wIiwidHlwZSIsInNldFRpbWVvdXQiLCJ0aHJlc2hvbGQiLCJzdGFydENvb3JkIiwiZGVsdGFYIiwieCIsImRlbHRhWSIsInkiLCJQQURESU5HX1RJTUVSX0tFWSIsInNldFNjcm9sbFBhZGRpbmciLCJfYiIsInRhZ05hbWUiLCJwYXJlbnRFbGVtZW50IiwiZWwiLCJmaW5kQ2xvc2VzdElvbkNvbnRlbnQiLCJ0aW1lciIsInNldFByb3BlcnR5Iiwic3RhcnRJbnB1dFNoaW1zIiwiY29uZmlnIiwicGxhdGZvcm0iLCJkb2N1bWVudCIsImlzSU9TIiwiaXNBbmRyb2lkIiwiZ2V0TnVtYmVyIiwic2Nyb2xsQXNzaXN0IiwiZ2V0Qm9vbGVhbiIsImlucHV0Qmx1cnJpbmciLCJpbnB1dHMiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaGlkZUNhcmV0TWFwIiwic2Nyb2xsQXNzaXN0TWFwIiwicmVnaXN0ZXJJbnB1dCIsIlByb21pc2UiLCJyZXNvbHZlIiwiY29tcG9uZW50T25SZWFkeSIsImlucHV0Um9vdCIsInNoYWRvd1Jvb3QiLCJxdWVyeVNlbGVjdG9yIiwicm1GbiIsImZvY3VzZWQiLCJkaWRTY3JvbGwiLCJvblNjcm9sbCIsIm9uRm9jdXNpbiIsIm9uVG91Y2hlbmQiLCJhY3RpdmUiLCJtYXRjaGVzIiwidGFwcGVkIiwidGFyZ2V0IiwiYmx1ciIsImVuYWJsZUlucHV0Qmx1cnJpbmciLCJvbkZvY3Vzb3V0IiwiZW5hYmxlU2Nyb2xsUGFkZGluZyIsImRldGFpbCIsImZuIiwidW5yZWdpc3RlcklucHV0Il0sInNvdXJjZVJvb3QiOiIifQ==